---
description: KISS-style Python coding and structure preferences
globs: ["**/*.py"]
alwaysApply: false
---

user_rules:
  - id: general_philosophy
    summary: "Follow KISS and Pythonic principles"
    description: |
      â€¢ Keep it simple, direct, and practical â€” avoid over-engineering.
      â€¢ Follow Pythonic conventions: readability, explicitness, and clarity.
      â€¢ Do not introduce abstractions, layers, or patterns unless they bring tangible value.
      â€¢ Simplicity and maintainability are more important than theoretical purity.

  - id: code_style
    summary: "Concise code, minimal comments, simple naming"
    description: |
      â€¢ Keep code short, direct, and readable â€” no redundant docstrings or comments.
      â€¢ Comment only when the reasoning is non-obvious.
      â€¢ Prefer short, intuitive names over verbose ones.
        âœ… user_data
        ðŸš« collected_user_profile_information
      â€¢ Avoid splitting into multiple files unless it improves clarity or reuse.
      â€¢ Use consistent formatting (PEP8 core ideas) but donâ€™t be dogmatic about line length or imports.

  - id: function_class_design
    summary: "Practical and focused function design"
    description: |
      â€¢ Each function should do one clear thing and be easy to read top-down.
      â€¢ Avoid deep OOP hierarchies â€” use functions or dataclasses when possible.
      â€¢ Limit the number of parameters; avoid excessive configuration options.
      â€¢ Use type hints for clarity, but not for verbosity.
        âœ… def add(a: int, b: int) -> int:
        ðŸš« def add(a: int | float | Decimal, b: int | float | Decimal) -> int | float | Decimal:

  - id: comments_documentation
    summary: "Explain why, not what"
    description: |
      â€¢ Comments should clarify intent or reasoning â€” never restate obvious behavior.
      â€¢ Write short, meaningful docstrings only when the functionâ€™s purpose isnâ€™t self-evident.
        ðŸš« # increment i by 1
        âœ… # ensure offset doesnâ€™t overflow index

  - id: architecture_files
    summary: "Flat and logical file structure"
    description: |
      â€¢ Keep project structure simple â€” prefer a few cohesive modules to dozens of tiny files.
      â€¢ Example:
          src/
            app.py
            utils.py
            models.py
      â€¢ Avoid micro-modules or deep folder trees unless absolutely necessary.

  - id: imports_dependencies
    summary: "Minimal dependencies and clean imports"
    description: |
      â€¢ Use only essential libraries; prefer the standard library when possible.
      â€¢ Avoid circular imports and long dependency chains.
      â€¢ Group imports logically, not alphabetically if that reduces clarity.

  - id: error_handling
    summary: "Straightforward and explicit error handling"
    description: |
      â€¢ Use simple try/except blocks.
      â€¢ Avoid wrapping exceptions unless it improves readability.
      â€¢ Fail fast and clearly; prefer explicit errors over silent handling.

  - id: example_code_style
    summary: "Example: preferred vs avoid"
    description: |
      âœ… Preferred
      ```python
      def fetch_user(uid: int):
          """Get user info from cache or DB."""
          if user := cache.get(uid):
              return user
          return db.get_user(uid)
      ```

      ðŸš« Avoid
      ```python
      def fetch_user_by_identifier(user_identifier: int) -> Optional[User]:
          """
          Fetch the user object either from the in-memory cache or from the persistent
          database if not present in the cache.
          """
          cached_user_object = cache.retrieve_from_cache(user_identifier)
          if cached_user_object is not None:
              return cached_user_object
          else:
              return database_connector.retrieve_user_record(user_identifier)
      ```
